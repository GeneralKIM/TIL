# effective-java 3/e


## Java 8 관련 부분
1/28 (월) - item 21, 55

### 21. 인터페이스는 구현하는 쪽을 생각해 설계하라

자바 7까지는 현재의 인터페이스에 새로운 메소드가 추가될일이 없었음. 그래서 실제 인터페이스를 작성할때도

구현클래스가 어떻게 구현될지 딱히 생각하지 않고 디폴트 메소드가 삽입되었다.

자바 8에서는 핵심 컬랙션 인터페이스들에 람다를 위한 다수의 디폴트 메소드가 추가되었다.

디폴트 메소드들은 대부분 잘 동작하지만, 생각할 수 있는 모든 상황에서 불변식을 해치지 않는

디폴트 메서드를 작성하기 어렵다.

default 메소드 예
```
default boolean removeIf(Predicate<? super E> filter) {
    Objects.requireNonNull(filter);
    boolean result = false;
    for (Iterator<E> it = iterator(); it.hasNext(); ) {
        if (filter.test(it.next()) {
            it.remove();
            result = true;
        }
    }
    return result;
}
```

인터페이스에 디폴트 메소드가 생긴건 좀 더 표준적인 메소드 구현을 위한 가이드 처럼 활용될 수도 있다.

디폴트 메소드는 기존 구현 메소드들과 어떻게 잘 어울러지고 연계될지는 잘 확인해보고 설계해야한다.

책에서는 다른 메소드들은 락을 염두한 구성이었는데 디폴트만 덩그러니 따라가지못하고 다른 방향으로 구현될 수 있다는 얘기이다.

사실 실수 하기 좋고, 구현체가 많거나 봐야할게 많으면 그런 연계성이 보장이 잘 안될 부분일거 같다;

인터페이스 원래 문제이기도 하지만 인터페이스를 수정하려면 기존에 구현된것과 충돌은 없는지 문제 없는지 잘 확인하고

인터페이스를 수정해야 한다. 나름의 구현 가이드같은건데 이 가이드가 변경되면 아래 구현들은 당연히 영향받는다.

그리고 인터페이스를 테스트할때는 구현테스트도 잘 하라고 하는데 이건 디폴트 메소드 유무와 관계없는 인터페이스 일반적인 얘기.



### 55. 옵셔널 반환은 신중히 하라

